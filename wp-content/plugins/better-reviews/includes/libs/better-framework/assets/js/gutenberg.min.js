!function(){function e(){this.element=window.wp&&window.wp.element,this.blocks=window.wp&&window.wp.blocks,this.prefix="better-studio/",this.props={},this.attributes={},this.blockFields={},this.shortcode={}}e.prototype.registerBlockType=function(e,t){this.shortcode=e,this.blockFields=t;var i=this.shortcode.block_id||this.shortcode.id.replace(/_/g,"-");this.blocks.registerBlockType(this.prefix+i,{title:this.shortcode.name||this.shortcode.id,icon:this.blockIcon(),category:this.shortcode.category||"betterstudio",edit:this.editBlock.bind(this),save:this.saveBlock.bind(this),attributes:this.blockAttributes(this.shortcode.id)})},e.prototype.saveBlock=function(){return null},e.prototype.blockAttributes=function(){if(!this.blockFields)return[];var e={},t=function(i){i.id&&i.attribute&&(e[i.id]=i.attribute),i.children&&i.children.forEach(function(e){t(e)})};return this.blockFields.forEach(t),e},e.prototype.editBlock=function(e){var t=e.name.replace(this.prefix,"");if(!t||t===e.name)return[];!e.isSelected&&this.props.name||(this.props=e);var i=!this.shortcode.click_able,n=this.element.createElement(this.getComponent("ServerSideRender"),{block:e.name,attributes:e.attributes,key:"D2"});return i&&(n=this.element.createElement(this.getComponent("Disabled"),{key:"D1"},n)),[this.buildBlockFields(),n]},e.prototype.buildElement=function(e,t){var i=[],n=this;return e.forEach(function(e){e.children?i.push(n.buildElement(e.children,e)):Array.isArray(e)?i.push(n.buildElement(e,t)):i.push(n.createElement(e))}),n.createElement(t,i)},e.prototype.createElement=function(e,t){var i=[this.getComponent(e.component),this.componentArgs(e)].concat(t||[]);return this.element.createElement.apply(this.element,i)},e.prototype.componentArgs=function(e){var t=e.args||{};if("Fragment"===e.component)return t;var i=this,n=function(t,i){t=t||"",t+=" ";var n=BF_Gutenberg.extraAttributes[e.id];return n&&n["enum"]?n["enum"].forEach(function(e){t=t.replace(new RegExp("\\b"+e+"\\s+","g"),"")}):1===i?i=e.id:0===i&&(i=""),t=t.trim()+" "+i,e.fixed_class&&!t.match(new RegExp("\\b"+e.fixed_class+"\\s+","g"))&&(t+=" "+e.fixed_class),t};t.onChange||(t.onChange=function(t){var o="add_class"===e.action?"className":e.id,r={};r[o]="add_class"===e.action?n(i.props.attributes[o],t):t,i.props.setAttributes(r)});var o=this.props.attributes[e.id];return t.value="undefined"==typeof o?e.std:o,t},e.prototype.buildBlockFields=function(){return this.buildElement([{id:"inspector",component:"InspectorControls",args:{key:"inspector"},children:[{id:"bf_edit_panel",component:"BF_Edit_Panel",args:{type:"edit-panel"},key:"bf_edit_panel",children:this.blockFields}]}],{id:"block_fragment",component:"Fragment",args:{key:"block_fragment"}})},e.prototype.getComponent=function(e){return wp.editor[e]?wp.editor[e]:wp.components[e]?wp.components[e]:wp.element[e]?wp.element[e]:void 0},e.prototype.blockIcon=function(){return this.shortcode.icon_url?this.element.createElement("img",{src:this.shortcode.icon_url}):this.shortcode.icon||""};var t={init:function(){this.registerBlocks(),this.registerSharedFields()},registerBlocks:function(){if(BF_Gutenberg&&BF_Gutenberg.blocks){var t;for(var i in BF_Gutenberg.blocks)t=new e,t.registerBlockType(BF_Gutenberg.blocks[i],BF_Gutenberg.blockFields[i])}},registerSharedFields:function(){if(wp.hooks&&wp.hooks.addFilter&&wp.compose&&wp.compose.createHigherOrderComponent&&BF_Gutenberg.stickyFields){var t=new e;wp.hooks.addFilter("editor.BlockEdit","betterstudio/shared_settings",wp.compose.createHigherOrderComponent(function(e){return function(i){t.props=i,t.attributes=i.attributes;var n=BF_Gutenberg.stickyFields.filter(function(e){return e.exclude_blocks&&e.exclude_blocks.indexOf(i.name)>-1?!1:e.include_blocks?e.include_blocks.indexOf(i.name)>-1:!0});if(!n)return t.element.createElement(e,i);var o=t.buildElement(n,{id:"inspector",component:"InspectorControls",args:{key:"inspector"}});return t.element.createElement(t.getComponent("Fragment"),{key:"E1"},o,t.element.createElement(e,i))}}))}}};t.init()}();