jQuery(function(e){function t(e){return a().indexOf(e.toString())>-1}function a(){var e=s.getItem("better-review-user-rating");return e?e.split(","):[]}function n(e){var t=a();t.push(e.toString());s.setItem("better-review-user-rating",t,217728e3,betterReviewsLoc.cp)}var s={getItem:function(e){return e?decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null:null},setItem:function(e,t,a,n,s,r){if(!e||/^(?:expires|max\-age|path|domain|secure)$/i.test(e))return!1;var i="";if(a)switch(a.constructor){case Number:i=a===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+a;break;case String:i="; expires="+a;break;case Date:i="; expires="+a.toUTCString()}return document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+i+(s?"; domain="+s:"")+(n?"; path="+n:"")+(r?"; secure":""),!0},removeItem:function(e,t,a){return!!this.hasItem(e)&&(document.cookie=encodeURIComponent(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(a?"; domain="+a:"")+(t?"; path="+t:""),!0)},hasItem:function(e){return!!e&&new RegExp("(?:^|;\\s*)"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)},keys:function(){for(var e=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),t=e.length,a=0;a<t;a++)e[a]=decodeURIComponent(e[a]);return e}},r=e("body").hasClass("rtl");e(".readers-ratings").on("mousemove",".rating-stars:not(.disable)",function(t){var a=e(this),n=(a.width()-2)/100,s=Math.ceil(r?e(this).offset().left+e(this).width()-t.pageX:t.pageX-e(this).offset().left),i=Math.min(100,Math.ceil(s/n));a.children("span").width(i+"%").data("rate",i)}).on("click",".rating-stars:not(.disable)",function(){var t=e(this),a=t.closest(".betterstudio-review");t.addClass("disable"),t.fadeOut(150,function(){t.parent().append('<i class="fa fa-spinner fa-spin loading" style="margin: 0 50px;"></i>')}),e.ajax({url:betterReviewsLoc.ajax_url,type:"POST",dataType:"json",data:{action:"better-review-rating",post_id:t.data("post-id"),rating:t.children("span").data("rate")}}).done(function(s){if(s.success)n(t.data("post-id")),t.children("span").width(s.data.vote+"%").data("rate",s.data.vote),e(".ratings-results .number",a).html(s.data.vote+"%"),t.fadeIn(150),e(".total-votes .number",a).html(s.data.votes_count);else{var r=e("<span />",{class:"error-message"}).html(s.data.message);r.appendTo(t.parent()),r.delay(4e3).fadeOut(150,function(){t.fadeIn(150),t.removeClass("disable")})}}).always(function(){t.parent().find(".loading").remove()})}),e(".readers-ratings .rating-stars:not(.disable)").each(function(){var a=e(this);t(a.data("post-id"))&&a.addClass("disable")})});