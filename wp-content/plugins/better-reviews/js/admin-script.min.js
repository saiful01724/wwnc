var Better_Reviews_Admin=function(e){"use strict";return{init:function(){this.prepare_overall_rating_label()},prepare_overall_rating_label:function(){e(".bf-section-repeater-option[data-id=_bs_review_criteria]").length<=0||(Better_Reviews_Admin.calculate_overall_rating(),e("input").on("change",function(){"bf-metabox-option[bs_review_metabox][_bs_review_rating_type]"==e(this).attr("name")&&Better_Reviews_Admin.calculate_overall_rating()}),e(".bf-section-repeater-option[data-id=_bs_review_criteria]").on("change",".bs-review-field-rating input",function(){Better_Reviews_Admin.calculate_overall_rating()}),e(".bf-section[data-id=_bs_review_criteria]").on("repeater_item_added",function(){Better_Reviews_Admin.calculate_overall_rating()}),e(".bf-section[data-id=_bs_review_criteria]").on("after_repeater_item_removed",function(){Better_Reviews_Admin.calculate_overall_rating()}))},add_span:function(){return e(".bf-section-repeater-option[data-id=_bs_review_criteria] .bf-heading-repeater-option h3 .overall-label").length>0?e(".bf-section-repeater-option[data-id=_bs_review_criteria] .bf-heading-repeater-option h3 .overall-label i"):(e(".bf-section-repeater-option[data-id=_bs_review_criteria] .bf-heading-repeater-option h3").append('<span class="overall-label">'+better_reviews_loc.overall_rating+" ( <i>-</i> )</span>"),e(".bf-section-repeater-option[data-id=_bs_review_criteria] .bf-heading-repeater-option h3 .overall-label i"))},calculate_overall_rating:function(){var t=e(".bf-section-repeater-option[data-id=_bs_review_criteria]"),i=Better_Reviews_Admin.add_span(),r=0;t.find(".bs-review-field-rating input[type=text]").each(function(t){parseFloat(e(this).val())&&(r+=parseFloat(e(this).val()))}),console.log(t.find(".bs-review-field-rating input")),i.html(Better_Reviews_Admin.format_overall_rating_number(r,t.find(".bs-review-field-rating input").length))},format_overall_rating_number:function(t,i){switch(e("[data-id=_bs_review_rating_type] .bf-controls-image_radio-option input[type=radio]:checked").val()){case"percentage":case"stars":return Math.round(10*t/i*10)/10+"%";case"points":return Math.round(t/i*10)/10}return Math.round(t/i*10)/10}}}(jQuery);jQuery(function(e){Better_Reviews_Admin.init()});